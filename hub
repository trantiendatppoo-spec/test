-- [[ EMMA HUB V24 - SIÊU FIX TRIỆT ĐỂ ]] --
-- [[ KEY: emmawatson ]] --

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- 1. ÉP BẬT HAKI & SIÊU AURA VĨNH VIỄN (KHÔNG CẦN BẬT NÚT)
task.spawn(function()
    while task.wait(0.1) do
        pcall(function()
            -- Tự bật Buso Haki ngay khi vào game
            if not LocalPlayer.Character:FindFirstChild("HasBuso") then
                ReplicatedStorage.Remotes.CommF_:InvokeServer("Buso")
            end
            
            -- Siêu Aura Quét Quái (Độ rát V15)
            local char = LocalPlayer.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                for _, mob in ipairs(workspace.Enemies:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                        if (mob.HumanoidRootPart.Position - char.HumanoidRootPart.Position).Magnitude <= 75 then
                            local tool = char:FindFirstChildOfClass("Tool")
                            if tool then
                                ReplicatedStorage.Modules.Net["RE/RegisterAttack"]:FireServer()
                                ReplicatedStorage.Modules.Net["RE/RegisterHit"]:FireServer(mob.HumanoidRootPart, {{mob, mob.HumanoidRootPart}}, nil, nil, "EmmaV24")
                            end
                        end
                    end
                end
            end
        end)
    end
end)

-- 2. GIAO DIỆN MỚI - DẸP BỎ DẤU VẾT NIGHTX
local function LoadEmmaV24()
    local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/WhiteX1208/NightUI/refs/heads/main/Source.lua"))()
    
    -- Xóa sổ NightX bằng cách đè Description và Title mạnh tay
    local Window = Library:NewWindow({
        Title = "Emma Hub [GOD MODE]",
        Description = "Emma Hub Team - Safe & Fast",
        Scale = game:GetService("UserInputService").TouchEnabled and UDim2.fromOffset(480, 360) or UDim2.fromOffset(580, 430),
    })

    local tab = Window:AddTab({ Title = "Main Farm", Icon = "84348960772548" })

    -- Dropdown vũ khí giúp Aura biết chém bằng cái gì
    tab:AddDropdown({
        Title = "Vũ Khí Farm",
        Values = {"Melee", "Sword", "Fruit"},
        Default = "Melee",
        Callback = function(v) _G.SelectWeapon = v end
    })

    tab:AddToggle({
        Title = "Bật Auto Farm Level (Tween)",
        Default = false,
        Callback = function(v) _G.AutoFarmLevel = v end
    })
    
    -- Tự động cầm vũ khí khi bật Farm
    task.spawn(function()
        while task.wait(0.5) do
            if _G.AutoFarmLevel then
                pcall(function()
                    local tool = LocalPlayer.Backpack:FindFirstChild(_G.SelectWeapon) or LocalPlayer.Backpack:FindFirstChildOfClass("Tool")
                    if tool and not LocalPlayer.Character:FindFirstChild(tool.Name) then
                        LocalPlayer.Character.Humanoid:EquipTool(tool)
                    end
                end)
            end
        end
    end)
end

-- 3. BẢNG LOGIN SIÊU GỌN
-- (Ông cháu tự gọi hàm LoadEmmaV24() sau khi check key emmawatson nhé!)
LoadEmmaV24()
