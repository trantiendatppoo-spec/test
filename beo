-- [[ EMMA HUB V33 - SIÊU FIX AURA & TELEPORT ]] --
-- [[ DẸP BỎ NIGHTX - KHÔNG CÒN LỖI ĐỨNG IM ]] --

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wall%20v3"))()
local Window = Library:CreateWindow("Emma Hub [V33]", "Emma Hub Team", 101609700892539)

local Tab = Window:CreateTab("Auto Farm")

-- 1. CẤU HÌNH LOGIC
_G.AutoFarm = false
_G.SelectWeapon = "Melee"

Tab:CreateDropdown("Chọn Vũ Khí", {"Melee", "Sword", "Fruit"}, function(v)
    _G.SelectWeapon = v
end)

Tab:CreateToggle("Bật Auto Farm Level", function(state)
    _G.AutoFarm = state
    print("Auto Farm: " .. tostring(state))
end)

-- 2. SIÊU LÕI FARM (AURA + TELE + AUTO HAKI)
task.spawn(function()
    while task.wait() do
        if _G.AutoFarm then
            pcall(function()
                local char = game.Players.LocalPlayer.Character
                local root = char:FindFirstChild("HumanoidRootPart")
                
                -- Tự bật Haki (Ép buộc)
                if not char:FindFirstChild("HasBuso") then
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Buso")
                end

                -- Tìm quái để vả
                for _, mob in ipairs(workspace.Enemies:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                        -- TELEPORT ÁP SÁT (Fix lỗi đứng im ở Café)
                        root.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 10, 0)
                        
                        -- CẦM VŨ KHÍ
                        local tool = game.Players.LocalPlayer.Backpack:FindFirstChild(_G.SelectWeapon) or char:FindFirstChild(_G.SelectWeapon)
                        if tool and not char:FindFirstChild(tool.Name) then
                            char.Humanoid:EquipTool(tool)
                        end
                        
                        -- SIÊU AURA (Vả cực rát)
                        local net = game:GetService("ReplicatedStorage").Modules.Net
                        net["RE/RegisterAttack"]:FireServer()
                        net["RE/RegisterHit"]:FireServer(mob.HumanoidRootPart, {{mob, mob.HumanoidRootPart}}, nil, nil, "EmmaFixV33")
                        break
                    end
                end
            end)
        end
    end
end)
