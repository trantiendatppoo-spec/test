-- [[ EMMA HUB V29 - SIÊU TỐI GIẢN - BẤM LÀ CHẠY ]] --
-- [[ KEY: emmawatson ]] --

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- 1. CẤU HÌNH CỨNG
_G.AutoFarm = false
_G.Weapon = "Melee" -- Đổi thành "Sword" nếu muốn dùng kiếm

-- 2. HÀM AURA & TELE & EQUIP (GOM CHUNG CHO NHẸ)
task.spawn(function()
    while task.wait() do
        if _G.AutoFarm then
            pcall(function()
                local char = LocalPlayer.Character
                local root = char:FindFirstChild("HumanoidRootPart")
                local hum = char:FindFirstChildOfClass("Humanoid")
                
                -- Tự bật Haki
                if not char:FindFirstChild("HasBuso") then
                    ReplicatedStorage.Remotes.CommF_:InvokeServer("Buso")
                end

                -- Tìm quái và vả
                for _, mob in ipairs(workspace.Enemies:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                        -- Bay sát quái
                        root.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 10, 0)
                        
                        -- Cầm vũ khí (Chỉ cầm 1 món duy nhất)
                        local tool = LocalPlayer.Backpack:FindFirstChild(_G.Weapon) or char:FindFirstChild(_G.Weapon)
                        if tool and not char:FindFirstChild(tool.Name) then
                            hum:EquipTool(tool)
                        end
                        
                        -- Aura vả quái
                        ReplicatedStorage.Modules.Net["RE/RegisterAttack"]:FireServer()
                        ReplicatedStorage.Modules.Net["RE/RegisterHit"]:FireServer(mob.HumanoidRootPart, {{mob, mob.HumanoidRootPart}}, nil, nil, "EmmaV29")
                        break
                    end
                end
            end)
        end
    end
end)

-- 3. TẠO GIAO DIỆN SIÊU NHẸ (KHÔNG DÙNG THƯ VIỆN NGOÀI)
local ScreenGui = Instance.new("ScreenGui", (gethui and gethui()) or game:GetService("CoreGui"))
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 200, 0, 100)
Main.Position = UDim2.new(0.5, -100, 0.5, -50)
Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Main.Active = true
Main.Draggable = true -- Có thể kéo đi chỗ khác

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "EMMA HUB V29"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(120, 50, 255)

local Toggle = Instance.new("TextButton", Main)
Toggle.Size = UDim2.new(0.8, 0, 0, 40)
Toggle.Position = UDim2.new(0.1, 0, 0.45, 0)
Toggle.Text = "AUTO FARM: OFF"
Toggle.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)

Toggle.MouseButton1Click:Connect(function()
    _G.AutoFarm = not _G.AutoFarm
    Toggle.Text = _G.AutoFarm and "AUTO FARM: ON" or "AUTO FARM: OFF"
    Toggle.BackgroundColor3 = _G.AutoFarm and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)
end)

print("Emma Hub V29 Loaded!")
